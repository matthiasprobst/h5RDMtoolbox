@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rep:   <http://www.openrdf.org/config/repository#>.
@prefix sr:    <http://www.openrdf.org/config/repository/sail#>.
@prefix sail:  <http://www.openrdf.org/config/sail#>.
@prefix graphdb: <http://www.ontotext.com/config/graphdb#>.
@prefix shacl: <http://rdf4j.org/config/sail/shacl#>.

[] a rep:Repository ;
  rep:repositoryID "h5rdmtoolbox-sandbox" ;
  rdfs:label "Sandbox Repo for h5rdmtoolbox." ;
  rep:repositoryImpl [
    rep:repositoryType "graphdb:SailRepository" ;
    sr:sailImpl [

      # ✅ THIS enables SHACL at commit time
      sail:sailType "rdf4j:ShaclSail" ;

      # the actual GraphDB store is the delegate
      sail:delegate [
        sail:sailType "graphdb:Sail" ;

        graphdb:read-only "false" ;

        # Inference and Validation
        graphdb:ruleset "rdfsplus-optimized" ;
        graphdb:disable-sameAs "true" ;
        graphdb:check-for-inconsistencies "false" ;

        # Indexing
        graphdb:entity-id-size "32" ;
        graphdb:enable-context-index "false" ;
        graphdb:enablePredicateList "true" ;
        graphdb:enable-fts-index "false" ;
        graphdb:fts-indexes ("default" "iri") ;
        graphdb:fts-string-literals-index "default" ;
        graphdb:fts-iris-index "none" ;

        # Queries and Updates
        graphdb:query-timeout "0" ;
        graphdb:throw-QueryEvaluationException-on-timeout "false" ;
        graphdb:query-limit-results "0" ;

        # ... keep the rest of your graphdb:* settings here ...
      ] ;

      # ✅ SHACL settings (turn validation on)
      shacl:validationEnabled "true" ;

      # optional but usually a good idea to be explicit:
      shacl:shapesGraph <http://rdf4j.org/schema/rdf4j#SHACLShapeGraph> ;
    ]
  ] .